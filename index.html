<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body >

                                                            <div data-gallery-root="" lang="ru" class="tm-article-body">
                                                                <div></div>
                                                                <div id="post-content-body">
                                                                    <div>
                                                                        <div
                                                                            class="article-formatted-body article-formatted-body article-formatted-body_version-1">
                                                                            <div xmlns="http://www.w3.org/1999/xhtml">
                                                                                <h6>1 Введение </h6><br>
                                                                                <br>
                                                                                В своей <a
                                                                                    href="http://habrahabr.ru/blogs/Git/60030/"><b>прошлой</b>
                                                                                </a>заметке я постарался осветить в
                                                                                общих чертах стиль работы с<br>
                                                                                распределенной системой контроля версий
                                                                                git и указать на отличия по сравнению
                                                                                с<br>
                                                                                классическими централизованными СКВ.
                                                                                Целью было прежде всего обобщение
                                                                                опыта<br>
                                                                                работы с системой без упоминания
                                                                                тонкостей синтаксиса отдельных
                                                                                команд.<br>
                                                                                <br>
                                                                                Данный же топик задумывался как
                                                                                непосредственное введение в работу с
                                                                                git, нечто<br>
                                                                                среднее между tutorial и обобщенной
                                                                                справкой, до которого все же
                                                                                рекомендуется<br>
                                                                                прочитать упомянутое выше введение.
                                                                                Сознательно избегаются технические<br>
                                                                                подробности работы git, употребляются
                                                                                только общие для СКВ термины и<br>
                                                                                ограничивается список упоминаемых
                                                                                команд.<br>
                                                                                <br>
                                                                                <a name="habracut"></a><br>
                                                                                <h6>2 Работа с локальным репозитарием
                                                                                </h6><br>
                                                                                <br>
                                                                                Сила любых распределенных систем — в
                                                                                наличии у каждого разработчика
                                                                                локального<br>
                                                                                репозитария, в котором возможно
                                                                                организовывать произвольную личную
                                                                                схему<br>
                                                                                разработки. В git есть несколько
                                                                                основных команды для ведения работы на
                                                                                месте и<br>
                                                                                множество вспомогательных.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h5>2.1 Базовые команды </h5><br>
                                                                                <br>
                                                                                Базовые команды — те, без которых
                                                                                невозможно обойтись в разработке.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.1.1 <i>git init</i> — создание
                                                                                    репозитария </h6><br>
                                                                                <br>
                                                                                Команда git init создает в директории
                                                                                пустой репозитарий в виде директория<br>
                                                                                .git, где и будет в дальнейшем храниться
                                                                                вся информация об истории коммитов,<br>
                                                                                тегах — ходе разработки проекта:<br>
                                                                                <br>
                                                                                mkdir project-dir<br>
                                                                                <br>
                                                                                cd project-dir<br>
                                                                                <br>
                                                                                git init<br>
                                                                                <br>
                                                                                Другой способ создать репозитарий —
                                                                                команда git clone, но о ней чуть
                                                                                позже.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.1.2 <i>git add</i> и <i>git rm</i>
                                                                                    — индексация изменений </h6><br>
                                                                                <br>
                                                                                Следующее, что нужно знать — команда git
                                                                                add. Она позволяет внести в индекс —
                                                                                временное хранилище — изменения, которые
                                                                                затем войдут в коммит. Примеры<br>
                                                                                использования:<br>
                                                                                <br>
                                                                                git add EDITEDFILE — индексация
                                                                                измененного файла, либо оповещение о<br>
                                                                                создании нового.<br>
                                                                                <br>
                                                                                git add. — внести в индекс все
                                                                                изменения, включая новые файлы.<br>
                                                                                <br>
                                                                                Из индекса и дерева одновременно проекта
                                                                                файл можно удалить командой git rm:<br>
                                                                                <br>
                                                                                git rm FILE1 FILE2 — отдельные файлы<br>
                                                                                <br>
                                                                                git rm Documentation/\*.txt — хороший
                                                                                пример удаления из документации к
                                                                                git,<br>
                                                                                удаляются сразу все файлы txt из
                                                                                папки.<br>
                                                                                <br>
                                                                                Сбросить весь индекс или удалить из него
                                                                                изменения определенного файла можно<br>
                                                                                командой git reset:<br>
                                                                                <br>
                                                                                git reset — сбросить нафиг весь
                                                                                индекс.<br>
                                                                                <br>
                                                                                git reset — EDITEDFILE — удалить из
                                                                                индекса конкретный файл.<br>
                                                                                <br>
                                                                                Команда git reset используется не только
                                                                                для сбрасывания индекса, поэтому
                                                                                дальше<br>
                                                                                ей будет уделено гораздо больше
                                                                                внимания. <br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.1.3 <i>git status</i> — состояние
                                                                                    проекта, измененные и не добавленные
                                                                                    файлы, индексированные файлы </h6>
                                                                                <br>
                                                                                <br>
                                                                                Команда git status, пожалуй, можно
                                                                                считать самой часто используемой наряду
                                                                                с<br>
                                                                                командами коммита и индексации. Она
                                                                                выводит информацию обо всех
                                                                                изменениях,<br>
                                                                                внесенных в дерево директорий проекта по
                                                                                сравнению с последним коммитом
                                                                                рабочей<br>
                                                                                ветки; отдельно выводятся внесенные в
                                                                                индекс и неиндексированные<br>
                                                                                файлы. Использовать ее крайне
                                                                                просто:<br>
                                                                                <br>
                                                                                git status<br>
                                                                                <br>
                                                                                Кроме того, git status указывает файлы с
                                                                                неразрешенными конфликтами слияния и<br>
                                                                                файлы, игнорируемые git.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.1.4 <i>git commit</i> — совершение
                                                                                    коммита </h6><br>
                                                                                <br>
                                                                                Коммиты — базовое понятие во всех
                                                                                системах контроля версий, поэтому
                                                                                совершатся<br>
                                                                                он должен легко и по возможности быстро.
                                                                                В самом своем простом виде
                                                                                достаточно<br>
                                                                                после индексации набрать: <br>
                                                                                <br>
                                                                                git commit<br>
                                                                                <br>
                                                                                Если индекс не пустой, то на его основе
                                                                                будет совершен коммит, после чего<br>
                                                                                пользователя попросят прокомментировать
                                                                                вносимые изменения вызовом команды<br>
                                                                                edit(например, в Ubuntu обычно
                                                                                вызывается простенький текстовый
                                                                                редактор nano, у<br>
                                                                                меня же — emacs). Сохраняемся, и вуала!
                                                                                Коммит готов.<br>
                                                                                <br>
                                                                                Есть несколько ключей, упрощающих работу
                                                                                с git commit:<br>
                                                                                <br>
                                                                                git commit -a — совершит коммит,
                                                                                автоматически индексируя изменения в
                                                                                файлах<br>
                                                                                проекта. Новые файлы при этом
                                                                                индексироваться <b>не будут</b>!
                                                                                Удаление же файлов<br>
                                                                                будет учтено.<br>
                                                                                <br>
                                                                                <br>
                                                                                git commit -m «commit comment» —
                                                                                комментируем коммит прямо из командной
                                                                                строки<br>
                                                                                вместо текстового редактора.<br>
                                                                                <br>
                                                                                git commit FILENAME — внесет в индекс и
                                                                                создаст коммит на основе изменений<br>
                                                                                единственного файла. <br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.1.5 <i>git reset</i> — возврат к
                                                                                    определенному коммиту, откат
                                                                                    изменений, «жесткий» или «мягкий»
                                                                                </h6><br>
                                                                                <br>
                                                                                Помимо работы с индексом (см. выше), git
                                                                                reset позволяет сбросить состояние<br>
                                                                                проекта до какого-либо коммита в
                                                                                истории. В git данное действие может
                                                                                быть двух<br>
                                                                                видов: «мягкого»(soft reset) и
                                                                                «жесткого» (hard reset).<br>
                                                                                <br>
                                                                                <br>
                                                                                «Мягкий» (с ключом "--soft") резет
                                                                                оставит нетронутыми ваши индекс и все
                                                                                дерево<br>
                                                                                файлов и директорий проекта, вернется к
                                                                                работе с указанным коммитом. Иными<br>
                                                                                словами, если вы обнаруживаете ошибку в
                                                                                только что совершенном коммите или<br>
                                                                                комментарии к нему, то легко можно
                                                                                исправить ситуацию:<br>
                                                                                <br>
                                                                                <ol>
                                                                                    <li>git commit… — некорректный
                                                                                        коммит; <br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git reset --soft HEAD^ —
                                                                                        переходим к работе над уже
                                                                                        совершенным коммитом,<br>
                                                                                        сохраняя все состояние проекта и
                                                                                        проиндексированные файлы <br>
                                                                                    </li>
                                                                                    <li>edit WRONGFILE <br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>edit ANOTHERWRONGFILE <br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>add.<br>
                                                                                        <br>
                                                                                    </li>
                                                                                </ol><br>
                                                                                <br>
                                                                                6.1. git commit -c ORIG_HEAD — вернутся
                                                                                к последнему коммиту, будет
                                                                                предложено<br>
                                                                                редактировать его сообщение. Если
                                                                                сообщение оставить прежним, то<br>
                                                                                достаточно изменить регистр ключа
                                                                                -с:<br>
                                                                                <br>
                                                                                6.2. git commit -C ORIG_HEAD<br>
                                                                                <br>
                                                                                Обратите внимание на обозначение HEAD^,
                                                                                оно означает «обратиться к предку<br>
                                                                                последнего коммита». Подробней описан
                                                                                синтаксис такой относительной
                                                                                адресации<br>
                                                                                будет ниже, в разделе «Хэши, тэги,
                                                                                относительная адресация».
                                                                                Соответственно,<br>
                                                                                HEAD — ссылка на последний коммит.
                                                                                Ссылка ORIG_HEAD после «мягкого»
                                                                                резета<br>
                                                                                указывает на оригинальный коммит.<br>
                                                                                <br>
                                                                                <br>
                                                                                Естественно, можно вернуться и на
                                                                                большую глубину коммитов,<br>
                                                                                <br>
                                                                                «Жесткий» резет (ключ --hard) — команда,
                                                                                которую следует использовать с<br>
                                                                                осторожностью. Git reset --hard вернет
                                                                                дерево проекта и индекс в состояние,<br>
                                                                                соответствующее указанному коммиту,
                                                                                удалив изменения последующих
                                                                                коммитов:<br>
                                                                                <br>
                                                                                git add.<br>
                                                                                <br>
                                                                                git commit -m «destined to death»<br>
                                                                                <br>
                                                                                git reset --hard HEAD~1 — больше никто и
                                                                                никогда не увидит этот позорный
                                                                                коммит.<br>
                                                                                <br>
                                                                                git reset --hard HEAD~3 — вернее, три
                                                                                последних коммита. Никто. Никогда.<br>
                                                                                <br>
                                                                                <br>
                                                                                Если команда достигнет точки ветвления,
                                                                                удаления коммита не произойдет. <br>
                                                                                <br>
                                                                                Для команд слияния или выкачивания
                                                                                последних изменений с удаленного
                                                                                репозитария<br>
                                                                                примеры резета будут приведены в
                                                                                соответствующих разделах.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.1.6 <i>git revert</i> — отмена
                                                                                    изменений, произведенных в прошлом
                                                                                    отдельным коммитом </h6><br>
                                                                                <br>
                                                                                Возможна ситуация, в которой требуется
                                                                                отменить изменения, внесенные
                                                                                отдельным<br>
                                                                                коммитом. Git revert создает новый
                                                                                коммит, накладывающий обратные
                                                                                изменения:<br>
                                                                                <br>
                                                                                <br>
                                                                                git revert config-modify-tag — отменяем
                                                                                коммит, помеченный тегом.<br>
                                                                                <br>
                                                                                git revert 12abacd — отменяем коммит,
                                                                                используя его хэш.<br>
                                                                                <br>
                                                                                Для использования команды необходимо,
                                                                                чтобы состояние проекта не отличалось
                                                                                от<br>
                                                                                состояния, зафиксированного последним
                                                                                коммитом.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.1.7 <i>git log</i> — разнообразная
                                                                                    информация о коммитах в целом, по
                                                                                    отдельным файлам и различной глубины
                                                                                    погружения в историю </h6><br>
                                                                                <br>
                                                                                Иногда требуется получить информацию об
                                                                                истории коммитов, коммитах,
                                                                                изменивших<br>
                                                                                отдельный файл; коммитах за определенный
                                                                                отрезок времени и так далее. Для
                                                                                этих<br>
                                                                                целей используется команда git log.<br>
                                                                                <br>
                                                                                Простейший пример использования, в
                                                                                котором приводится короткая справка по
                                                                                всем<br>
                                                                                коммитам, коснувшимся активной в
                                                                                настоящий момент ветки (о ветках и
                                                                                ветвлении<br>
                                                                                подробно узнать можно ниже, в разделе
                                                                                «Ветвления и слияния»):<br>
                                                                                <br>
                                                                                git log <br>
                                                                                <br>
                                                                                Получить подробную информацию о каждом в
                                                                                виде патчей по файлам из коммитов<br>
                                                                                можно, добавив ключ -p (или -u):<br>
                                                                                <br>
                                                                                git log -p<br>
                                                                                <br>
                                                                                Статистика изменения файлов, вроде числа
                                                                                измененных файлов, внесенных в них<br>
                                                                                строк, удаленных файлов вызывается
                                                                                ключом --stat:<br>
                                                                                <br>
                                                                                <br>
                                                                                git log --stat<br>
                                                                                <br>
                                                                                За информацию по созданиям,
                                                                                переименованиям и правам доступа файлов
                                                                                отвечает ключ<br>
                                                                                --summary:<br>
                                                                                <br>
                                                                                git log --summary<br>
                                                                                <br>
                                                                                Для исследования истории отдельного
                                                                                файла достаточно указать в виде
                                                                                параметра<br>
                                                                                его имя (кстати, в моей старой версии
                                                                                git этот способ не срабатывает,<br>
                                                                                обязательно добавлять " — " перед
                                                                                «README»):<br>
                                                                                <br>
                                                                                git log README<br>
                                                                                <br>
                                                                                или, если версия git не совсем
                                                                                свежая:<br>
                                                                                <br>
                                                                                git log — README<br>
                                                                                <br>
                                                                                Далее будет приводится только более
                                                                                современный вариант синтаксиса.
                                                                                Возможно<br>
                                                                                указывать время, начиная в определенного
                                                                                момента («weeks», «days», «hours»,
                                                                                «s»<br>
                                                                                и так далее):<br>
                                                                                <br>
                                                                                git log --since=«1 day 2 hours» README
                                                                                <br>
                                                                                <br>
                                                                                git log --since=«2 hours» README <br>
                                                                                <br>
                                                                                git log --since=«2 hours» dir/ —
                                                                                изменения, касающиеся отдельной
                                                                                папки.<br>
                                                                                <br>
                                                                                <br>
                                                                                Можно отталкиваться от тегов:<br>
                                                                                <br>
                                                                                git log v1… — все коммиты, начиная с
                                                                                тега v1.<br>
                                                                                <br>
                                                                                git log v1… README — все коммиты,
                                                                                включающие изменения файла README,
                                                                                начиная с<br>
                                                                                тега v1.<br>
                                                                                <br>
                                                                                git log v1..v2 README — все коммиты,
                                                                                включающие изменения файла README,
                                                                                начиная с<br>
                                                                                тега v1 и заканчивая тегом v2.<br>
                                                                                <br>
                                                                                Создание, выведение списка, назначение
                                                                                тегов будет приведено в
                                                                                соответствующем<br>
                                                                                разделе ниже.<br>
                                                                                <br>
                                                                                Интересные возможности по формату вывода
                                                                                команды предоставляет ключ --pretty:<br>
                                                                                <br>
                                                                                <br>
                                                                                git log --pretty=oneline — выведет на
                                                                                каждый из коммитов по строчке, состоящей
                                                                                из хэша<br>
                                                                                (здесь — уникального идентификатора
                                                                                каждого коммита, подробней —
                                                                                дальше).<br>
                                                                                <br>
                                                                                git log --pretty=short — лаконичная
                                                                                информация о коммитах, приводятся
                                                                                только<br>
                                                                                автор и комментарий<br>
                                                                                <br>
                                                                                git log --pretty=full/fuller — более
                                                                                полная информация о коммитах, с
                                                                                именем<br>
                                                                                автора, комментарием, датой создания и
                                                                                внесения коммита<br>
                                                                                <br>
                                                                                В принципе, формат вывода можно
                                                                                определить самостоятельно: <br>
                                                                                <br>
                                                                                git log --pretty=format:'FORMAT'<br>
                                                                                <br>
                                                                                Определение формата можно поискать в
                                                                                разделе по git log из Git Community
                                                                                Book<br>
                                                                                или справке. Красивый ASCII-граф
                                                                                коммитов выводится с использованием
                                                                                ключа<br>
                                                                                --graph.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.1.8 <i>git diff</i> — отличия
                                                                                    между деревьями проекта; коммитами;
                                                                                    состоянием индекса и каким-либо
                                                                                    коммитом. </h6><br>
                                                                                <br>
                                                                                Своего рода подмножеством команды git
                                                                                log можно считать команду git diff,<br>
                                                                                определяющую изменения между объектами в
                                                                                проекте: деревьями (файлов и<br>
                                                                                директорий):<br>
                                                                                <br>
                                                                                git diff — покажет изменения, не
                                                                                внесенные в индекс.<br>
                                                                                <br>
                                                                                git diff --cached — изменения, внесенные
                                                                                в индекс.<br>
                                                                                <br>
                                                                                <br>
                                                                                git diff HEAD — изменения в проекте по
                                                                                сравнению с последним коммитом<br>
                                                                                <br>
                                                                                git diff HEAD^ — предпоследним
                                                                                коммитом<br>
                                                                                <br>
                                                                                Можно сравнивать «головы» веток:<br>
                                                                                <br>
                                                                                git diff master..experimental<br>
                                                                                <br>
                                                                                Ну или активную ветку с какой-либо:<br>
                                                                                <br>
                                                                                git diff experimental<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.1.9 <i>git show</i> — показать
                                                                                    изменения, внесенные отдельным
                                                                                    коммитом </h6><br>
                                                                                <br>
                                                                                Посмотреть изменения, внесенные любым
                                                                                коммитом в истории можно командой
                                                                                git<br>
                                                                                show:<br>
                                                                                <br>
                                                                                git show COMMIT_TAG<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.1.10 <i>git blame</i> и <i>git
                                                                                        annotate</i> — вспомогательные
                                                                                    команды, помогающие отслеживать
                                                                                    изменения файлов </h6><br>
                                                                                <br>
                                                                                При работе в команде часто требуется
                                                                                выяснить, кто именно написал
                                                                                конкретный<br>
                                                                                код. Удобно использовать команду git
                                                                                blame, выводящую построчную информацию
                                                                                о<br>
                                                                                последнем коммите, коснувшемся строки,
                                                                                имя автора и хэш коммита:<br>
                                                                                <br>
                                                                                git blame README<br>
                                                                                <br>
                                                                                Можно указать и конкретные строки для
                                                                                отображения:<br>
                                                                                <br>
                                                                                git blame -L 2,+3 README — выведет
                                                                                информацию по трем строкам, начиная со
                                                                                второй.<br>
                                                                                <br>
                                                                                Аналогично работает команда git
                                                                                annotate, выводящая и строки, и
                                                                                информацию о<br>
                                                                                коммитах, их коснувшихся:<br>
                                                                                <br>
                                                                                git annotate README<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.1.11 <i>git grep</i> — поиск слов
                                                                                    по проекту, состоянию проекта в
                                                                                    прошлом </h6><br>
                                                                                <br>
                                                                                git grep, в целом, просто дублирует
                                                                                функционал знаменитой юниксовой<br>
                                                                                команды. Однако, он позволяет слова и их
                                                                                сочетания искать в прошлом проекта,
                                                                                что<br>
                                                                                бывает очень полезно:<br>
                                                                                <br>
                                                                                git grep tst — поиск слова tst в
                                                                                проекте.<br>
                                                                                <br>
                                                                                git grep -с tst — подсчитать число
                                                                                упоминаний tst в проекте.<br>
                                                                                <br>
                                                                                <br>
                                                                                git grep tst v1 — поиск в старой версии
                                                                                проекта.<br>
                                                                                <br>
                                                                                Команда позволяет использовать
                                                                                логическое И и ИЛИ:<br>
                                                                                <br>
                                                                                git grep -e 'first' --and -e 'another' —
                                                                                найти строки, где упоминаются и
                                                                                первое<br>
                                                                                слово, и второе.<br>
                                                                                <br>
                                                                                git grep --all-match -e 'first' -e
                                                                                'second' — найти строки, где встречается
                                                                                хотя<br>
                                                                                бы одно из слов.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h5>2.2 Ветвление </h5><br>
                                                                                <br>
                                                                                Операции ветвления и слияния — сердце и
                                                                                душа git, именно эти возможности делают
                                                                                такой<br>
                                                                                удобной работу с системой.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.2.1 <i>git branch</i> — создание,
                                                                                    перечисление и удаление веток </h6>
                                                                                <br>
                                                                                <br>
                                                                                Работа с ветками — очень легкая
                                                                                процедура в git, все необходимые
                                                                                механизмы<br>
                                                                                сконцентрированы в одной команде:<br>
                                                                                <br>
                                                                                git branch — просто перечислит
                                                                                существующие ветки, отметив
                                                                                активную.<br>
                                                                                <br>
                                                                                git branch new-branch — создаст новую
                                                                                ветку new-branch.<br>
                                                                                <br>
                                                                                git branch -d new-branch — удалит ветку,
                                                                                если та <b>была залита</b> (merged)
                                                                                с<br>
                                                                                разрешением возможных конфликтов в
                                                                                текущую.<br>
                                                                                <br>
                                                                                git branch -D new-branch — удалит ветку
                                                                                <b>в любом</b> случае.<br>
                                                                                <br>
                                                                                git branch -m new-name-branch —
                                                                                переименует ветку.<br>
                                                                                <br>
                                                                                <br>
                                                                                git branch --contains v1.2 — покажет те
                                                                                ветки, среди предков которых есть<br>
                                                                                определенный коммит.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.2.2 <i>git checkout</i> —
                                                                                    переключение между ветками,
                                                                                    извлечение отдельных файлов из
                                                                                    истории коммитов</h6><br>
                                                                                <br>
                                                                                Команда git checkout позволяет
                                                                                переключаться между последними коммитами
                                                                                (если<br>
                                                                                упрощенно) веток:<br>
                                                                                <br>
                                                                                checkout some-other-branch<br>
                                                                                <br>
                                                                                checkout -b some-other-new-branch —
                                                                                создаст ветку, в которую и
                                                                                произойдет<br>
                                                                                переключение.<br>
                                                                                <br>
                                                                                Если в текущей ветке были какие-то
                                                                                изменения по сравнению с последним
                                                                                коммитом в<br>
                                                                                ветке(HEAD), то команда откажется
                                                                                производить переключение, дабы не
                                                                                потерять<br>
                                                                                произведенную работу. Проигнорировать
                                                                                этот факт позволяет ключ -f:<br>
                                                                                <br>
                                                                                checkout -f some-other-branch<br>
                                                                                <br>
                                                                                В случае, когда изменения надо все же
                                                                                сохранить, используют ключ -m. Тогда
                                                                                команда<br>
                                                                                перед переключением попробует залить
                                                                                изменения в текущую ветку и, после<br>
                                                                                разрешения возможных конфликтов,
                                                                                переключиться в новую:<br>
                                                                                <br>
                                                                                checkout -m some-other-branch<br>
                                                                                <br>
                                                                                <br>
                                                                                Вернуть файл (или просто вытащить из
                                                                                прошлого коммита) позволяет команда
                                                                                вида:<br>
                                                                                <br>
                                                                                git checkout somefile — вернуть somefile
                                                                                к состоянию последнего коммита<br>
                                                                                git checkout HEAD~2 somefile — вернуть
                                                                                somefile к состоянию на два коммита
                                                                                назад по ветке.<br>
                                                                                <br>
                                                                                <h6>2.2.3 <i>git merge</i> — слияние
                                                                                    веток (разрешение возможных
                                                                                    конфликтов). </h6><br>
                                                                                <br>
                                                                                Слияние веток, в отличие от обычной
                                                                                практики централизованных систем, в
                                                                                git<br>
                                                                                происходит практически каждый день.
                                                                                Естественно, что имеется удобный
                                                                                интерфейс к<br>
                                                                                популярной операции:<br>
                                                                                <br>
                                                                                git merge new-feature — попробует
                                                                                объединить текующую ветку и ветку
                                                                                new-feature.<br>
                                                                                <br>
                                                                                В случае возникновения конфликтов
                                                                                коммита не происходит, а по проблемным
                                                                                файлам<br>
                                                                                расставляются специальные метки а ля
                                                                                svn; сами же файлы отмечаются в индексе
                                                                                как<br>
                                                                                «не соединенные» (unmerged). До тех пор
                                                                                пока проблемы не будут решены, коммит
                                                                                совершить<br>
                                                                                будет нельзя.<br>
                                                                                <br>
                                                                                Например, конфликт возник в файле
                                                                                TROUBLE, что можно увидеть в git
                                                                                status:<br>
                                                                                <br>
                                                                                git merge experiment — произошла
                                                                                неудачная попытка слияния.<br>
                                                                                <br>
                                                                                git status — смотрим на проблемные
                                                                                места.<br>
                                                                                <br>
                                                                                edit TROUBLE — разрешаем проблемы.<br>
                                                                                <br>
                                                                                git add. — индексируем наши изменения,
                                                                                тем самым снимая метки.<br>
                                                                                <br>
                                                                                git commit — совершаем коммит
                                                                                слияния.<br>
                                                                                <br>
                                                                                Вот и все, ничего сложного. Если в
                                                                                процессе разрешения вы передумали
                                                                                разрешать<br>
                                                                                конфликт, достаточно набрать:<br>
                                                                                <br>
                                                                                git reset --hard HEAD — это вернет обе
                                                                                ветки в исходные состояния.<br>
                                                                                <br>
                                                                                <br>
                                                                                Если же коммит слияния был совершен,
                                                                                используем команду:<br>
                                                                                <br>
                                                                                git reset --hard ORIG_HEAD<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.2.4 <i>git rebase</i> — построение
                                                                                    ровной линии коммитов </h6><br>
                                                                                <br>
                                                                                Предположим, разработчик завел
                                                                                дополнительную ветку для разработки
                                                                                отдельной<br>
                                                                                возможности и совершил в ней несколько
                                                                                коммитов. Одновременно по какой-либо<br>
                                                                                причине в основной ветке также были
                                                                                совершены коммиты: например, в нее
                                                                                были<br>
                                                                                залиты изменения с удаленного сервера;
                                                                                либо сам разработчик совершал в ней<br>
                                                                                коммиты.<br>
                                                                                <br>
                                                                                В принципе, можно обойтись обычным
                                                                                <i>git merge</i>. Но тогда усложняется
                                                                                сама линия<br>
                                                                                разработки, что бывает нежелательно в
                                                                                слишком больших проектах, где
                                                                                участвует<br>
                                                                                множество разработчиков. <br>
                                                                                <br>
                                                                                Предположим, имеется две ветки, master и
                                                                                топик, в каждой из которых было
                                                                                совершенно несколько коммитов начиная с
                                                                                момента ветвления.<br>
                                                                                Команда git rebase берет коммиты из
                                                                                ветки topic и накладывает их на
                                                                                последний коммит ветки<br>
                                                                                master:<br>
                                                                                <br>
                                                                                <ol>
                                                                                    <li>git-rebase master topic —
                                                                                        вариант, в котором явно
                                                                                        указывается, что и куда<br>
                                                                                        прикладывается.<br>
                                                                                    </li>
                                                                                    <li>git-rebase master — на master
                                                                                        накладывается активная в
                                                                                        настоящий момент<br>
                                                                                        ветка.<br>
                                                                                        <br>
                                                                                    </li>
                                                                                </ol><br>
                                                                                <br>
                                                                                После использования команды история
                                                                                становится линейной. При возникновении
                                                                                <br>
                                                                                конфликтов при поочередном накладывании
                                                                                коммитов<br>
                                                                                работа команды будет останавливаться, а
                                                                                в проблемные местах файлов появятся<br>
                                                                                соответствующие метки. После
                                                                                редактирования — разрешения конфликтов —
                                                                                файлы<br>
                                                                                следует внести в индекс командой git add
                                                                                и продолжить наложение следующих<br>
                                                                                коммитов командой git rebase --continue.
                                                                                Альтернативными выходами будут
                                                                                команды<br>
                                                                                git rebase --skip (пропустить наложение
                                                                                коммита и перейти к следующему) или
                                                                                git<br>
                                                                                rebase --abort (отмена работы команды и
                                                                                всех внесенных изменений).<br>
                                                                                <br>
                                                                                С ключом -i (--interactive) команда
                                                                                будет работать в интерактивном<br>
                                                                                режиме. Пользователю будет предоставлена
                                                                                возможность определить порядок
                                                                                внесения<br>
                                                                                изменений, автоматически будет вызывать
                                                                                редактор для разрешения конфликтов и
                                                                                так<br>
                                                                                далее.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.2.5 <i>git cherry-pick</i> —
                                                                                    применение к дереву проекта
                                                                                    изменений, внесенных отдельным
                                                                                    коммитом </h6><br>
                                                                                <br>
                                                                                Если ведется сложная история разработки,
                                                                                с несколькими длинными ветками<br>
                                                                                разработками, может возникнуть
                                                                                необходимость в применении изменений,
                                                                                внесенных<br>
                                                                                отдельным коммитом одной ветки, к дереву
                                                                                другой (активной в настоящий момент).
                                                                                <br>
                                                                                <br>
                                                                                git cherry-pick BUG_FIX_TAG — изменения,
                                                                                внесенные указанным коммитом будут<br>
                                                                                применены к дереву, автоматически
                                                                                проиндексированы и станут коммитом в
                                                                                активной<br>
                                                                                ветке.<br>
                                                                                <br>
                                                                                git cherry-pick BUG_FIX_TAG -n — ключ
                                                                                "-n" показывает, что изменения надо<br>
                                                                                просто применить к дереву проекта без
                                                                                индексации и создания коммита.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h5>2.3 Прочие команды и необходимые
                                                                                    возможности </h5><br>
                                                                                <br>
                                                                                Для удобства работы с git было введено
                                                                                дополнительное понятие: тэг. Кроме
                                                                                того<br>
                                                                                дальше будет пояснена необходимость в
                                                                                хэшах, и его применение; показан
                                                                                способ<br>
                                                                                обращаться к коммитам при помощи
                                                                                относительной адресации.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.3.1 Хэш — уникальная идентификация
                                                                                    объектов </h6><br>
                                                                                <br>
                                                                                В git для идентификации любых объектов
                                                                                используется уникальный (то есть с<br>
                                                                                огромной вероятностью уникальный) хэш из
                                                                                40 символов, который определяется<br>
                                                                                хэшируюшей функцией на основе
                                                                                содержимого объекта. Объекты — это все:
                                                                                коммиты,<br>
                                                                                файлы, тэги, деревья. Поскольку хэш
                                                                                уникален для содержимого, например,
                                                                                файла,<br>
                                                                                то и сравнивать такие файлы очень легко
                                                                                — достаточно просто сравнить две
                                                                                строки<br>
                                                                                в сорок символов.<br>
                                                                                <br>
                                                                                Больше всего нас интересует тот факт,
                                                                                что хэши идентифицируют коммиты. В
                                                                                этом<br>
                                                                                смысле хэш — продвинутый аналог ревизий
                                                                                Subversion. Несколько примеров<br>
                                                                                использования хэшей в качестве способа
                                                                                адресации:<br>
                                                                                <br>
                                                                                git diff
                                                                                f292ef5d2b2f6312bc45ae49c2dc14588eef8da2
                                                                                — найти разницу текущего<br>
                                                                                состояния проекта и коммита за номером…
                                                                                Ну сами видите, каким.<br>
                                                                                <br>
                                                                                git diff f292ef5 — то же самое, но
                                                                                оставляем только шесть первых символов.
                                                                                Git<br>
                                                                                поймет, о каком коммите идет речь, если
                                                                                не существует другого коммита с
                                                                                таким<br>
                                                                                началом хэша.<br>
                                                                                <br>
                                                                                git diff f292 — иногда хватает и четырех
                                                                                символов.<br>
                                                                                <br>
                                                                                git log febc32...f292 — читаем лог с
                                                                                коммита по коммит.<br>
                                                                                <br>
                                                                                <br>
                                                                                Разумеется, человеку пользоваться хэшами
                                                                                не так удобно, как машине, именно
                                                                                поэтому были<br>
                                                                                введены другие объекты — тэги.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.3.2 <i>git tag</i> — тэги как
                                                                                    способ пометить уникальный коммит
                                                                                </h6><br>
                                                                                <br>
                                                                                Тэг (tag) — это объект, связанный с
                                                                                коммитом; хранящий ссылку на сам коммит,
                                                                                имя<br>
                                                                                автора, собственное имя и некоторый
                                                                                комментарий. Кроме того, разработчик
                                                                                может<br>
                                                                                оставлять на таких тегах собственную
                                                                                цифровую подпись.<br>
                                                                                <br>
                                                                                Кроме этого в git представленные так
                                                                                называемые «легковесные тэги»
                                                                                («lightweight<br>
                                                                                tags»), состоящие только из имени и
                                                                                ссылки на коммит. Такие тэги, как
                                                                                правило,<br>
                                                                                используются для упрощения навигации по
                                                                                дереву истории; создать их очень
                                                                                легко:<br>
                                                                                <br>
                                                                                git tag stable-1 — создать «легковесный»
                                                                                тэг, связанный с последним<br>
                                                                                коммитом. Если тэг уже есть, то еще один
                                                                                создан не будет.<br>
                                                                                <br>
                                                                                git tag stable-2 f292ef5 — пометить
                                                                                определенный коммит. <br>
                                                                                <br>
                                                                                git tag -d stable-2 — удалить тег.<br>
                                                                                <br>
                                                                                git tag -l — перечислить тэги.<br>
                                                                                <br>
                                                                                git tag -f stable-1.1 — создать тэг для
                                                                                последнего коммита, заменить<br>
                                                                                существующий, если таковой уже был.<br>
                                                                                <br>
                                                                                После создания тэга его имя можно
                                                                                использовать вместо хэша в любых
                                                                                командах<br>
                                                                                вроде git diff, git log и так далее:<br>
                                                                                <br>
                                                                                <br>
                                                                                git diff stable-1.1...stable-1<br>
                                                                                <br>
                                                                                Обычные тэги имеет смысл использовать
                                                                                для приложения к коммиту какой-либо<br>
                                                                                информации, вроде номера версии и
                                                                                комментария к нему. Иными словами, если
                                                                                в<br>
                                                                                комментарии к коммиту пишешь «исправил
                                                                                такой-то баг», то в комментарии к тэгу
                                                                                по<br>
                                                                                имени «v1.0» будет что-то вроде
                                                                                «стабильная версия, готовая к
                                                                                использованию»:<br>
                                                                                <br>
                                                                                git tag -a stable — создать обычный тэг
                                                                                для последнего коммита; будет вызван<br>
                                                                                текстовый редактор для составления
                                                                                комментария.<br>
                                                                                <br>
                                                                                git tag -a stable -m «production
                                                                                version» — создать обычный тэг, сразу
                                                                                указав в<br>
                                                                                качестве аргумента комментарий.<br>
                                                                                <br>
                                                                                Команды перечисления, удаления,
                                                                                перезаписи для обычных тэгов не
                                                                                отличаются от<br>
                                                                                команд для «легковесных» тэгов.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.3.3 Относительная адресация </h6>
                                                                                <br>
                                                                                <br>
                                                                                Вместо ревизий и тэгов в качестве имени
                                                                                коммита можно опираться на еще один<br>
                                                                                механизм — относительную адресацию.
                                                                                Например, можно обратиться прямо к
                                                                                предку<br>
                                                                                последнего коммита ветки master:<br>
                                                                                <br>
                                                                                git diff master^<br>
                                                                                <br>
                                                                                Если после «птички» поставить цифру, то
                                                                                можно адресоваться по нескольким
                                                                                предкам<br>
                                                                                коммитов слияния:<br>
                                                                                <br>
                                                                                git diff HEAD^2 — найти изменения по
                                                                                сравнению со вторым предком
                                                                                последнего<br>
                                                                                коммита в master. HEAD здесь — указатель
                                                                                на последний коммит активной ветки.<br>
                                                                                <br>
                                                                                Аналогично, тильдой можно просто
                                                                                указывать, насколько глубоко в историю
                                                                                ветки<br>
                                                                                нужно погрузиться:<br>
                                                                                <br>
                                                                                git diff master^^ — что привнес
                                                                                «дедушка» нынешнего коммита.<br>
                                                                                <br>
                                                                                git diff master~2 — то же самое.<br>
                                                                                <br>
                                                                                Обозначения можно объединять, чтобы
                                                                                добраться до нужного коммита:<br>
                                                                                <br>
                                                                                git diff master~3^~2<br>
                                                                                <br>
                                                                                git diff master~6<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>2.3.4 <i>файл .gitignore</i> —
                                                                                    объясняем git, какие файлы следует
                                                                                    игнорировать </h6><br>
                                                                                <br>
                                                                                Иногда по директориям проекта
                                                                                встречаются файлы, которые не хочется
                                                                                постоянно<br>
                                                                                видеть в сводке git status. Например,
                                                                                вспомогательные файлы текстовых<br>
                                                                                редакторов, временные файлы и прочий
                                                                                мусор. <br>
                                                                                <br>
                                                                                Заставить git status игнорировать можно,
                                                                                создав в корне или глубже по дереву<br>
                                                                                (если ограничения должны быть только в
                                                                                определенных директория) файл<br>
                                                                                .gitignore. В этих файлах можно
                                                                                описывать шаблоны игнорируемых
                                                                                файлов<br>
                                                                                определенного формата.<br>
                                                                                <br>
                                                                                Пример содержимого такого файла:<br>
                                                                                <br>
                                                                                &gt;&gt;&gt;&gt;&gt;&gt;&gt;Начало
                                                                                файла<br>
                                                                                <br>
                                                                                #комментарий к файлу .gitignore<br>
                                                                                <br>
                                                                                #игнорируем сам .gitignore<br>
                                                                                <br>
                                                                                <br>
                                                                                .gitignore<br>
                                                                                <br>
                                                                                #все html-файлы…<br>
                                                                                <br>
                                                                                <br>
                                                                                *.html<br>
                                                                                <br>
                                                                                <br>
                                                                                #… кроме определенного<br>
                                                                                <br>
                                                                                <br>
                                                                                !special.html<br>
                                                                                <br>
                                                                                <br>
                                                                                #не нужны объектники и архивы<br>
                                                                                <br>
                                                                                *.[ao]<br>
                                                                                <br>
                                                                                &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;Конец
                                                                                файла<br>
                                                                                <br>
                                                                                Существуют и другие способы указания
                                                                                игнорируемых файлов, о которых можно
                                                                                узнать<br>
                                                                                из справки git help gitignore.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>3 «Вместе мы — сила», или основы
                                                                                    работы с удаленным репозитарием
                                                                                </h6><br>
                                                                                <br>
                                                                                Естественно, что большая часть проектов
                                                                                все-таки подразумевает работу по
                                                                                крайней<br>
                                                                                мере двух разработчиков, которым
                                                                                требуется обмениваться кодом. Далее
                                                                                будут<br>
                                                                                перечислены команды, требующиеся для
                                                                                совместной — возможно удаленной —
                                                                                работы.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h5>3.1 Удаленные ветки (remote tracking
                                                                                    branches) </h5><br>
                                                                                <br>
                                                                                Новое понятие здесь — удаленные ветки.
                                                                                Удаленные ветки соответствуют
                                                                                какой-либо<br>
                                                                                ветке (чаще master) на удаленном
                                                                                сервере. Одна такая создается
                                                                                автоматически при<br>
                                                                                создании копии удаленного репозитария;
                                                                                все команды, связанные с удаленной<br>
                                                                                работой, будут по умолчанию использовать
                                                                                именно эту удаленную ветку (обычно<br>
                                                                                называется «origin»).<br>
                                                                                <br>
                                                                                Рассмотрим эти команды.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h5>3.2 <i>git clone</i> — создание
                                                                                    копии (удаленного) репозитария </h5>
                                                                                <br>
                                                                                <br>
                                                                                Для начала работы с центральным
                                                                                репозитарием, следует создать копию<br>
                                                                                оригинального проекта со всей его
                                                                                историей локально:<br>
                                                                                <br>
                                                                                git clone /home/username/project myrepo
                                                                                — клонируем репозитарий с той же
                                                                                машины<br>
                                                                                в директорию myrepo.<br>
                                                                                <br>
                                                                                git clone
                                                                                ssh://user@somehost:port/~user/repository
                                                                                — клонируем репозитарий,<br>
                                                                                используя безопасный протокол ssh (для
                                                                                чего требуется завести у себя на
                                                                                машине<br>
                                                                                эккаунт ssh).<br>
                                                                                <br>
                                                                                git clone
                                                                                git://user@somehost:port/~user/repository/project.git/
                                                                                — у git имеется<br>
                                                                                и собственный протокол.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h5>3.3 <i>git fetch</i> и <i>git
                                                                                        pull</i> — забираем изменения из
                                                                                    центрального репозитария (из
                                                                                    удаленной ветки) </h5><br>
                                                                                <br>
                                                                                Для синхронизации текущей ветки с
                                                                                репозитарием используются команды git
                                                                                fetch и<br>
                                                                                git pull.<br>
                                                                                <br>
                                                                                git fetch — забрать изменения удаленной
                                                                                ветки из репозитария по умолчания,<br>
                                                                                основной ветки; той, которая была
                                                                                использована при клонировании<br>
                                                                                репозитария. Изменения обновят удаленную
                                                                                ветку (remote tracking branch),
                                                                                после<br>
                                                                                чего надо будет провести слияние с
                                                                                локальной ветку командой git merge.<br>
                                                                                <br>
                                                                                git fetch /home/username/project —
                                                                                забрать изменения из определенного<br>
                                                                                репозитария.<br>
                                                                                <br>
                                                                                Возможно также использовать синонимы для
                                                                                адресов, создаваемые командой git
                                                                                remote:<br>
                                                                                <br>
                                                                                git remote add username-project
                                                                                /home/username/project<br>
                                                                                <br>
                                                                                git fetch username-project — забрать
                                                                                изменения по адресу, определяемому<br>
                                                                                синонимом. <br>
                                                                                <br>
                                                                                Естественно, что после оценки изменений,
                                                                                например, командой git diff, из надо<br>
                                                                                создать коммит слияния с основной:<br>
                                                                                <br>
                                                                                git merge username-project/master<br>
                                                                                <br>
                                                                                Команда git pull сразу забирает
                                                                                изменения и проводит слияние с активной
                                                                                веткой:<br>
                                                                                <br>
                                                                                git pull — забрать из репозитария, для
                                                                                которого были созданы удаленные ветки
                                                                                по<br>
                                                                                умолчанию.<br>
                                                                                <br>
                                                                                git pull username-project — забрать
                                                                                изменения из определенного
                                                                                репозитария.<br>
                                                                                <br>
                                                                                <br>
                                                                                Как правило, используется сразу команда
                                                                                git pull.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h5>3.4 <i>git push</i> — вносим
                                                                                    изменения в удаленный репозитарий
                                                                                    (удаленную ветку) </h5><br>
                                                                                <br>
                                                                                После проведения работы в
                                                                                экспериментальной ветке, слияния с
                                                                                основной,<br>
                                                                                необходимо обновить удаленный
                                                                                репозитарий (удаленную ветку). Для
                                                                                этого<br>
                                                                                используется команда git push:<br>
                                                                                <br>
                                                                                git push — отправить свои изменения в
                                                                                удаленную ветку, созданную при<br>
                                                                                клонировании по умолчанию.<br>
                                                                                <br>
                                                                                git push
                                                                                ssh://yourserver.com/~you/proj.git
                                                                                master:experimental — отправить
                                                                                изменения<br>
                                                                                из ветки master в ветку experimental
                                                                                удаленного репозитария.<br>
                                                                                <br>
                                                                                git push origin :experimental — в
                                                                                удаленном репозитарии origin удалить
                                                                                ветку experimental.<br>
                                                                                <br>
                                                                                git push origin master:master — в
                                                                                удаленную ветку master репозитария
                                                                                origin (синоним<br>
                                                                                репозитария по умолчанию) ветки
                                                                                локальной ветки master.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>4 git-о-день </h6><br>
                                                                                <br>
                                                                                В этом разделе будут показаны и
                                                                                разобраны подробно несколько обычных и
                                                                                чуть<br>
                                                                                меньше необычных для работы с git
                                                                                ситуаций.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h5>4.1 Обычный workflow при работе с
                                                                                    локальным репозитарием </h5><br>
                                                                                <br>
                                                                                Git обладает необычайной легкостью в
                                                                                использовании не только как
                                                                                распределенная<br>
                                                                                система контроля версий, но и в работе с
                                                                                локальными проектами. Давайте
                                                                                разберем<br>
                                                                                обычный цикл — начиная с создания
                                                                                репозитария — работы разработчика git
                                                                                над<br>
                                                                                собственным персональным проектом:<br>
                                                                                <br>
                                                                                <ol>
                                                                                    <li>mkdir git-demo<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>cd git-demo<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git init<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git add.<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git commit -m «initial
                                                                                        commit»<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git branch new-feature<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git checkout new-feature<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git add.<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git commit -m «Done with the new
                                                                                        feature»<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git checkout master<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git diff HEAD new-feature<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git merge new-feature<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git branch -d new-feature<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git log --since=«1 day»<br>
                                                                                        <br>
                                                                                    </li>
                                                                                </ol><br>
                                                                                <br>
                                                                                Разберем каждое из действий. 1-2 —
                                                                                просто создаем рабочую директорию<br>
                                                                                проекта. 3 — создаем репозитарий в
                                                                                директории. 4 — индексируем все
                                                                                существующие<br>
                                                                                файлы проекта (если, конечно, они вообще
                                                                                были). 5 — создаем инициализирующий<br>
                                                                                коммит. 6 — новая ветка, 7 —
                                                                                переключение в нее (можно сделать в один
                                                                                шаг<br>
                                                                                командой git checkout -b new-feature).
                                                                                Далее, после непосредственной работы
                                                                                с<br>
                                                                                кодом, индексируем внесенные
                                                                                изменения(8), совершаем коммит(9).
                                                                                Переключаемся в<br>
                                                                                основную ветку(10), смотрим отличия
                                                                                между последним коммитом активной ветки
                                                                                и<br>
                                                                                последним коммитом экспериментальной
                                                                                (11). Проводим слияние (12) и, если не
                                                                                было<br>
                                                                                никаких конфликтов, удаляем ненужную
                                                                                больше ветку (13). Ну и на всякий
                                                                                случай<br>
                                                                                оценим проведенную за последний день
                                                                                работу (14).<br>
                                                                                <br>
                                                                                Почему именно так? Зачем отказываться от
                                                                                линейной модели? Хотя бы даже
                                                                                потому,<br>
                                                                                что у программиста появляется
                                                                                дополнительная гибкость: он может
                                                                                переключаться<br>
                                                                                между задачами (ветками); под рукой
                                                                                всегда остается «чистовик» — ветка<br>
                                                                                master; коммиты становятся мельче и
                                                                                точнее.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h5>4.2 Workflow при работе с удаленным
                                                                                    репозитарием </h5><br>
                                                                                <br>
                                                                                Предположим, что вы и несколько ваших
                                                                                напарников создали общественный<br>
                                                                                репозитарий, чтобы заняться неким общим
                                                                                проектом. Как выглядит самая<br>
                                                                                распространенная для git модель общей
                                                                                работы?<br>
                                                                                <br>
                                                                                <ol>
                                                                                    <li>git clone <a
                                                                                            href="http://yourserver.com/~you/proj.git">http://yourserver.com/~you/proj.git</a><br>
                                                                                        … возможно, прошло некоторое
                                                                                        время.<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git pull<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git diff HEAD^<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git checkout -b bad-feature<br>
                                                                                        … работаем некоторое время.<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git commit -a -m «Created a bad
                                                                                        feature»<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git checkout master<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git pull<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git merge bad-feature<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git commit -a<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git diff HEAD^<br>
                                                                                        … запускаем тесты проекта,
                                                                                        обнаруживаем, что где-то
                                                                                        произошла ошибка. Упс.<br>
                                                                                        <br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git reset --hard ORIG_HEAD<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git checkout bad-feature<br>
                                                                                        … исправляем ошибку.<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git -m bad-feature
                                                                                        good-feature<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git commit -a -m «Better
                                                                                        feature»<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git checkout master<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git pull<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git merge good-feature<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git push<br>
                                                                                        <br>
                                                                                    </li>
                                                                                    <li>git branch -d good-feature<br>
                                                                                        <br>
                                                                                    </li>
                                                                                </ol><br>
                                                                                <br>
                                                                                Итак, первым делом создаем (1) создаем
                                                                                копию удаленного репозитария (по<br>
                                                                                умолчанию команды вроде git pull и git
                                                                                push будут работать с ним).
                                                                                «Вытягиваем»<br>
                                                                                последние обновления (2); смотрим, что
                                                                                же изменилось(3); создаем новую ветвь
                                                                                и<br>
                                                                                переключаемся в нее (4); индексируем все
                                                                                изменения и одновременно создаем из
                                                                                них<br>
                                                                                коммит (5); переключаемся в главную
                                                                                ветвь (6), обновляем ее (7);
                                                                                проводим<br>
                                                                                слияние с веткой bad-feature(8) и,
                                                                                обнаружив и разрешив конфликт, делаем
                                                                                коммит<br>
                                                                                слияния (9).<br>
                                                                                <br>
                                                                                После совершения коммита отслеживаем
                                                                                изменения(10), запускаем, например,<br>
                                                                                юнит-тесты и с ужасом обнаруживаем, что
                                                                                после слияния проект валится на
                                                                                большей<br>
                                                                                части тестов. <br>
                                                                                <br>
                                                                                В принципе, тесты можно было прогнать и
                                                                                до коммита, в момент<br>
                                                                                слияния (между пунктами 8 и 9); тогда бы
                                                                                хватило «мягкого» резета.<br>
                                                                                <br>
                                                                                Таким образом, приходится совершить
                                                                                «жесткий» (11) сброс произошедшего
                                                                                слияния,<br>
                                                                                ветки вернулись в исходное до состояние.
                                                                                После чего переключаемся в неудачную<br>
                                                                                ветку (12), вносим необходимые изменения
                                                                                и переименовываем ветку (13).
                                                                                Совершаем<br>
                                                                                коммит (14); переходим в главную
                                                                                ветку(15), опять ее обновляем (16). На
                                                                                этот раз<br>
                                                                                бесконфликтно делаем слияние (17),
                                                                                закидываем изменения в удаленный
                                                                                репозитарий<br>
                                                                                (18) и удаляем ненужную теперь ветку
                                                                                (19). Закрываем ноутбук, одеваемся и
                                                                                идем<br>
                                                                                домой под утро.<br>
                                                                                <br>
                                                                                <br>
                                                                                <h6>5 Заключение </h6><br>
                                                                                <br>
                                                                                В топике не рассмотрено несколько важных
                                                                                вопросов, вроде администрирования<br>
                                                                                общественного репозитария, интеграции с
                                                                                текстовыми редакторами или IDE,<br>
                                                                                использования SSH под Линукс и Windows;
                                                                                приветствуются замечания, и особенно<br>
                                                                                дополнения в раздел «git-о-день».<br>
                                                                                <br>
                                                                                <br>
                                                                                UPD: замечание по работе с удаленным
                                                                                репозитарием. При работе с git с точки
                                                                                зрения администрирования, создания
                                                                                общественных репозитариев, управления
                                                                                доступом, использования шифрованных
                                                                                соединений и так далее могут возникнуть
                                                                                определенные вопросы; причем в этой
                                                                                заметке они не освещаются никак.
                                                                                Например, выше описана работа с уже
                                                                                <b>готовым </b> удаленным репозитарием;
                                                                                его развертывание никак не освещено.
                                                                                <br>
                                                                                <br>
                                                                                Это все я сейчас собираю в отдельный
                                                                                топик, которую и выкину сюда через
                                                                                неделю-полторы. <br>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    
                                                                                                       
</body>
</html>